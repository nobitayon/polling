@using Delta.Polling.FrontEnd.Logics.Member.Choices.Commands.AddAnotherChoiceOngoingPoll;
@model AddAnotherChoiceOngoingPollCommand;

<form id="add-another-choice" 
      method="post"
      asp-page="member/polls/details"
      asp-page-handler="AddAnotherChoice"
      onsubmit="handleFormSubmit(event);">
    <div class="mb-1 row">

        <input type="hidden" asp-for="PollId" name="PollId" />

        <label class="col-md-3 col-form-label">Description</label>
        <div class="col-md-9">
            <input type="text" autocomplete="off" asp-for="Description" name="Description" class="form-control" />
            <span asp-validation-for="Description" class="text-danger"></span>
        </div>
    </div>

    <div class="mb-1 row">
        <div class="col-md-3">
        </div>
    </div>

    <div class="mb-1 justify-content-between">
        <button type="button" class="btn btn-secondary close-button" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary save-button">Save</button>
    </div>

</form>


<script type="text/javascript" language=javascript>

    $.validator.unobtrusive.parse(document);

    function handleFormSubmit(event) {

        event.preventDefault(); // Prevent the default form submission

        // const form = event.target; // Get the form element
        // const formData = new FormData(form); // Create a FormData object from the form

        // console.log("action", form.action);
        // console.log("action", formData);

        // fetch(form.action, {
        //     method: 'POST',
        //     body: formData,
        //     headers: {
        //         'Accept': 'application/json',
        //     },
        // })
        //     .then(response => {
        //         console.log(response);
        //         console.log(response.body);

        //         return response.json()
        //     })

        //     .then(resJson => {
        //         console.log(resJson)
        //         if (resJson.isValid) {

        //             if (resJson.html != null) {
        //                 let table = document.getElementById("viewAll");
        //                 let containerFeed = table.querySelector('ul');
        //                 containerFeed.innerHTML += resJson.html; // Append the result to the container

        //                 $('#form-modal').modal('hide'); // Hide the modal
        //             }
        //         }
        //     })
        //     .catch(error => console.error('Error:', error)); // Handle any errors

        // console.log("Apakah sampai sini");

        console.log("Hello There");

        return false; // Prevent the default form submission
    }
</script>
